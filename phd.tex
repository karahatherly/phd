\documentclass[a4paper,twoside,openright,11pt,oldfontcommands]{memoir}

\usepackage[pdftex,hyperindex,bookmarks]{hyperref}

\let\printglossary\relax
\let\theglossary\relax
\let\endtheglossary\relax
\usepackage[acronym,toc,nomain]{glossaries}
\makeglossaries

\usepackage[australian]{babel}
\usepackage[english=british]{csquotes}
\usepackage[bf,sf]{titlesec}

\usepackage{microtype}
\usepackage{algorithm}
%\usepackage{algpsuedocode}
%\Onehalfspacing
\usepackage{booktabs}


%
% UNSW margin guidelines:
%
%   Top >= 30mm
%   Bottom >= 20mm
%   Left >= 40mm (do they mean inner?)
%   Right >= 20mm (do they mean outer?)
%
\usepackage[
        inner=36mm, % NOPRINT
        outer=36mm, % NOPRINT
        top=30mm,
        bottom=35mm,
        headsep=10mm,
        headheight=20pt,
        footskip=12mm,
        includehead=false,
        includefoot=false,
        marginparwidth=30mm,
        heightrounded=true
        ]{geometry}

\frenchspacing

\usepackage{amsfonts}
\usepackage[pdftex]{graphicx}
\graphicspath{{imgs/}}
%\usepackage[nottoc,numbib]{tocbibind}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{mwe}
\usepackage{setspace}
\usepackage{datetime}
\newdateformat{monthyear}{\monthname[\THEMONTH] \THEYEAR}

% maths
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{pifont}
\usepackage{textcomp}
\usepackage{gensymb}
%\usepackage[page]{appendix}
\usepackage{longtable}
\usepackage{mathptmx}
\hypersetup{
    pdfborder = {0 0 0.75 [1.5 3]},
    allbordercolors = {0.122 0.471 0.706},
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
    }
\usepackage{cleveref}
\usepackage{array}
%\usepackage[usenames,dvipsnames]{color}
\usepackage{colortbl}
\usepackage{pdfpages}
\usepackage{tabularx}
%\usepackage{booktabs}
\usepackage{listings}
\usepackage{tikz}
\usepackage{listings}
\usepackage{xspace}
\usepackage{enumitem}
\usepackage{multirow}
\usepackage{verbatim}
\usepackage{pgfgantt}
\usepackage{pgfplots}
\usepackage{chngpage}
\pgfplotsset{width=7cm,compat=newest}
\usepackage{url}
\usepackage[authoryear,square,sort]{natbib}
\usepackage{bibentry}
\renewcommand{\cite}{\citep}
\usepgfplotslibrary{ternary}
%\newif \ifhyperlinks    \hyperlinkstrue
%\newif \ifDraft         \Draftfalse
\newif \ifDraft        \Drafttrue
\lstset{
    language=C,
    stepnumber=1,
    tabsize=4,
    captionpos=b,
    numbers=left,
    showstringspaces=false,
    basicstyle=\small\ttfamily,
    xleftmargin=6pt,
    xrightmargin=6pt
}
\usetikzlibrary{arrows,automata,shapes.multipart,positioning,plotmarks}

% font
\usepackage{palatino}
\usepackage{inconsolata}
\usepackage[T1]{fontenc}
%\usepackage{libertine}
%\renewcommand{\rmdefault}{ppl}
%\renewcommand{\ttdefault}{pcr}
% commands
\newcommand{\yes}{\checkmark}
\newcommand{\no}{\hspace{1pt}\ding{55}}

% sel4 system call shortcuts
\newcommand{\call}     {\texttt{Call}\xspace}
\newcommand{\send}     {\texttt{Send}\xspace}
\newcommand{\wait}     {\texttt{Wait}\xspace}
\newcommand{\nbsend}   {\texttt{NBSend}\xspace}
\newcommand{\reply}    {\texttt{Reply}\xspace}
\newcommand{\replyrecv}{\texttt{ReplyRecv}\xspace}
\newcommand{\yield}    {\texttt{Yield}\xspace}
\newcommand{\sendwait} {\texttt{SendWait}\xspace}


\newcommand{\replywait}{\texttt{ReplyWait}\xspace}
\newcommand{\recv}{\texttt{Recv}\xspace}


\newcommand{\selfour}{seL4\xspace} % use as normal text, examples below.
\newcommand{\hires}{\textsc{HiRes}\xspace}
\newcommand{\litmus}{\textsc{litmus\textsuperscript{RT}}\xspace}
\newcommand{\flare}{FlaRe\xspace}
\newcommand{\composite}{\textsc{Composite}\xspace}
\newcommand{\schedfifo}{\texttt{SCHED\_FIFO}\xspace}
\newcommand{\schedrr}{\texttt{SCHED\_RR}\xspace}
\newcommand{\schedsporadic}{\texttt{SCHED\_SPORADIC}\xspace}
\newcommand{\noprioinherit}{\texttt{NO\_PRIO\_INHERIT}\xspace}
\newcommand{\prioinherit}{\texttt{PRIO\_INHERIT}\xspace}
\newcommand{\prioprotect}{\texttt{PRIO\_PROTECT}\xspace}

\newcommand{\code}[1]{\texttt{#1}\xspace}
\newcommand{\crit}[1]{\textsc{#1}\xspace}
% Leave this in here, it is often useful to deal with latexdiff breakage.
% Put it around breakage-causing segments (in both versions to be diffed!)
\newenvironment{DIFnomarkup}{}{}

\urlstyle{rm}

\newcolumntype{i}[1]{%
    >{
\itemize[leftmargin=0.3cm]}
			p{#1}%
		<{\enditemize}}

\newcommand{\itemcol}[1] {
		\multicolumn{1}{i{5cm}|}{#1}
}

%
% Footnote styling.
%

% 10pt footnotes, per requirements
\renewcommand{\footnotesize}{\fontsize{9}{10}\selectfont}

% Frown upon splitting footnotes.
\interfootnotelinepenalty=5000

% Allow a bit of stretching at the bottom of the y neccessary.
%\makeatletter
%\def\@textbottom{\vskip\z@\@plus.1pt}
%\let\@texttop\relax
%\makeatother

\title{Mixed-Criticality Scheduling 
      and Resource Sharing for
     High-Assurance Operating Systems}
\author{Anna Lyons}
%\AuthorEmail{Anna.Lyons@data61.csiro.au}


% chapter headings

%make our pretty chapter headings
% Copied from AlexL via DaveC via Adam
\newcommand{\chapformat}[1]{\parbox[c]{0.8\textwidth}{\Huge #1}}
\titleformat{\chapter}[hang]
    {\bfseries}
    {\parbox[c]{0.2\textwidth}{\rmfamily\fontsize{72}{72}
     \selectfont\thechapter\hspace{10pt}\rule[-12pt]{2pt}{72pt}}}
    {0pt}
    {\chapformat}


\setsecnumdepth{subsection}

\widowpenalty10000
\clubpenalty10000

% evaluation commands
\newcommand{\inputbenchmarkrows}[3]{
    \multirow{2}{*}{#1}
    \input{data/generated/#2-#3-micro.inc}
    \hline
}

\newcommand{\ipcmicro}[3]{\inputbenchmarkrows{#1}{#2}{#3-ipc}}
\newcommand{\faultmicro}[2]{\inputbenchmarkrows{#1}{#2}{fault}}
\newcommand{\irqmicro}[2]{\inputbenchmarkrows{#1}{#2}{irq}}
\newcommand{\schedulemicro}[2]{\inputbenchmarkrows{#1}{#2}{schedule}}
\begin{document}
\pagenumbering{roman}

% Title page 
\input{title}

\urlstyle{sf}
\pagestyle{plain}

%Abstract
    
\section*{Abstract}
\vspace{10mm}


\vspace{5mm}
\begin{center}
\begin{minipage}{.8\textwidth}
Criticality of a software system refers to the severity of the impact of a failure.
In a high-criticality system, failure risks significant loss of life or damage to the environment.
In a low-criticality system, failure may risk a downgrade in user-experience.
Traditionally, systems of different criticality were isolated by hardware.
This approach is no longer practical as it has proven inefficient and restrictive.
The result is mixed-criticality systems, where software applications with different criticalities execute on the same hardware.
Such systems go beyond standard temporal isolation and require asymmetric protection between applications of different criticalities.
\end{minipage}
\vspace{3mm}

\begin{minipage}{.8\textwidth}
Whilst there has been some momentum in real-time operating system (RTOS) research, the implications of mixed-criticality systems for OSes have not been fully explored.
The goal of this project is to develop a mixed-criticality OS.
Two key properties are required: first, time must be managed as a central resource of the system, while allowing for overbooking with asymmetric protection without increasing certification burdens.
Second, components of different criticalities should be able to safely share resources without suffering undue utilisation penalties.
The implementation platform will be the \selfour microkernel, which is built for the safety-critical, high assurance domain.

\end{minipage}
\end{center}
\clearpage

\tableofcontents
\cleardoublepage
\newpage

\mainmatter

\sloppy
\setcounter{page}{1}
\pagenumbering{arabic}

% keep sorted
%\section{Acronyms}
\newacronym{API}{API}{application programming interface}
\newacronym[firstplural={certification authorities (CAs)}]{CA}{CA}{certification authority}
\newacronym{BWI}{BWI}{bandwidth inheritance}
\newacronym{CBS}{CBS}{constant bandwidth server}
\newacronym{CFS}{CFS}{completely fair scheduler}
\newacronym{CPU}{CPU}{central processing unit}
\newacronym{DBF}{DBF}{demand bound function}
\newacronym{DM}{DM}{deadline monotonic}
\newacronym{DMA}{DMA}{direct memory access}
\newacronym{DOS}{DOS}{denial of service}
\newacronym{DS}{DS}{deferrable server}
\newacronym{EDF}{EDF}{earliest deadline first}
\newacronym{FIFO}{FIFO}{first-in first-out}
\newacronym{FRT}{FRT}{firm real-time}
\newacronym{FP}{FP}{fixed priority}
\newacronym{FPU}{FPU}{floating point unit}
\newacronym{FPRM}{FPRM}{fixed-priority rate monotonic}
\newacronym{HLP}{HLP}{highest lockers protocol}
\newacronym{HRT}{HRT}{hard real-time}
\newacronym{HRM}{HRM}{hierarchical resource management}
\newacronym{HTM}{HTM}{hardware transactional memory}
\newacronym{IPC}{IPC}{inter-process communication}
\newacronym{IRQ}{IRQ}{interrupt request}
\newacronym{ISR}{ISR}{interrupt service routine}
\newacronym{MCAR}{MCAR}{Mixed Criticality Architecture Requirements}
\newacronym[plural=MCSes]{MCS}{MCS}{mixed criticality system}
\newacronym{MMU}{MMU}{memory management unit}
\newacronym{MPU}{MPU}{memory protection unit}
\newacronym{MPISS}{MPISS}{Max Planck Institute for Software Systems}
\newacronym{MSR}{MSR}{model specific registers}
\newacronym{NCET}{NCET}{nominal-case execution time}
\newacronym{NCP}{NCP}{non-preemptive critical sections protocol}
\newacronym{NRT}{NRT}{non real-time}
\newacronym{OCET}{OCET}{overloaded-case execution time}
\newacronym[firstplural={operating systems (OSes)},plural={OSes}]{OS}{OS}{operating system}
\newacronym{PCP}{PCP}{priority ceiling protocol}
\newacronym{PIP}{PIP}{priority inheritance protocol}
\newacronym{POSIX}{POSIX}{portable operating system interface}
\newacronym{RBED}{RBED}{rate-based earliest deadline first}
\newacronym{RM}{RM}{rate monotonic}
\newacronym{RPC}{RPC}{remote procedure call}
\newacronym{RTAS}{RTAS}{Real-Time and Embedded Technology and Applications Symposium}
\newacronym{RTSS}{RTSS}{Real-Time Systems Symposium}
\newacronym[plural={RTOSes}]{RTOS}{RTOS}{real-time operating system}
\newacronym{QoS}{QoS}{quality of service}
\newacronym{RTA}{RTA}{response time analysis}
\newacronym{SMP}{SMP}{symmetric multiprocessor}
\newacronym{SRT}{SRT}{soft real-time}
\newacronym{SoC}{SoC}{system on Chip}
\newacronym{SCO}{SCO}{scheduling context object}
\newacronym{SOSP}{SOSP}{Symposium on Operating Systems Principles}
\newacronym{SS}{SS}{sporadic server}
\newacronym{SWaP}{SWaP}{size, weight and power}
\newacronym{TCB}{TCB}{thread control block}
\newacronym{TLB}{TLB}{translation lookaside buffer}
\newacronym{TSC}{TSC}{timestamp counter}
\newacronym{UAV}{UAV}{unmanned aerial vehicle}
\newacronym{UDP}{UDP}{User Datagram Protocol}
\newacronym{VM}{VM}{virtual machine}
\newacronym{WCET}{WCET}{worst case execution time}
\newacronym{ZS}{ZS}{zero slack}
\pagebreak

\input{introduction}
\input{background}
\input{scheduling}
\input{resource-sharing}
\input{operating-systems}
\input{seL4}
\input{model}
\input{implementation}
\input{evaluation}
\input{conclusion}

\backmatter
\cleardoublepage
\listoffigures
\clearpage
%\listoftables
%\listofalgorithms
%\addcontentsline{toc}{chapter}{List of algorithms}
\printglossary[type=\acronymtype]
\cleardoublepage
\bibliographystyle{plainnat}
%\bibliographystyle{my-abbrvnat}
%\bibliographystyle{apalike}
\bibliography{references}
\clearpage
\appendix
\addappheadtotoc
\section{Fastpath Performance Analysis}
\input{data/generated/kzm-ipc-perf.inc}
\input{data/generated/sabre-ipc-perf.inc}
\input{data/generated/hikey32-ipc-perf.inc}
\input{data/generated/hikey64-ipc-perf.inc}
\input{data/generated/tx1-ipc-perf.inc}
\input{data/generated/haswell-ipc-perf.inc}

\end{document}
