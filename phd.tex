\documentclass[a4paper,twoside,openright,11pt,oldfontcommands]{memoir}

\usepackage[pdftex,hyperindex,bookmarks,linktoc=all]{hyperref}

\let\printglossary\relax
\let\theglossary\relax
\let\endtheglossary\relax
\usepackage[acronym,toc,nomain]{glossaries}
\makeglossaries

\usepackage[australian]{babel}
\usepackage[english=british]{csquotes}
\usepackage[bf,sf]{titlesec}

\usepackage{microtype}
\usepackage{algorithm}
%\usepackage{algpsuedocode}
%\Onehalfspacing
\usepackage[usenames]{color}
\usepackage[table]{xcolor}
\definecolor{forestgreen}{rgb}{0.0, 0.27, 0.13}
\definecolor{royalblue}{rgb}{0.0, 0.14, 0.4}

\usepackage{booktabs}
% UNSW margin guidelines:
%
%   Top >= 30mm
%   Bottom >= 20mm
%   Left >= 40mm (do they mean inner?)
%   Right >= 20mm (do they mean outer?)
%
\usepackage[
        inner=36mm, % NOPRINT
        outer=36mm, % NOPRINT
        top=30mm,
        bottom=35mm,
        headsep=10mm,
        headheight=20pt,
        footskip=12mm,
        includehead=false,
        includefoot=false,
        marginparwidth=30mm,
        heightrounded=true
        ]{geometry}

\frenchspacing

\usepackage{amsfonts}
\usepackage[pdftex]{graphicx}
\graphicspath{{imgs/}}
%\usepackage[nottoc,numbib]{tocbibind}
\usepackage{caption}
\captionsetup{font=small} % format=hang,
\usepackage{subcaption}
\usepackage{mwe}
\usepackage{setspace}
\usepackage{datetime}
\newdateformat{monthyear}{\monthname[\THEMONTH] \THEYEAR}

% maths
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{pifont}
\usepackage{textcomp}
\usepackage{gensymb}
\usepackage{mathptmx}
\hypersetup{
    pdfborder = {0 0 0.75 [1.5 3]},
    allbordercolors = {0.122 0.471 0.706},
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
    }

\usepackage{listings}
% references
%  use \cref to reference labels and automagically guess the
% name (ie Section, Figure etc).
\usepackage[capitalise]{cleveref} 
% clever ref doesn't know about listings, add a format for it
\crefformat{lstlisting}{Listing #2#1#3}  

\usepackage{array}
%\usepackage[usenames,dvipsnames]{color}
\usepackage{colortbl}
\usepackage{pdfpages}
\usepackage{tabularx}
\setlength{\extrarowheight}{3pt} % increase table row height
\newcommand{\tableheadline}[1]{\multicolumn{1}{l}{\spacedlowsmallcaps{#1}}}
\newcommand{\myfloatalign}{\centering} % to be used with each float for alignment
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{xspace}

% abbreviations with correct spacing
\newcommand*{\eg}{e.g.\@\xspace}
\newcommand*{\ie}{i.e.\@\xspace}
\newcommand*{\IO}{I/O\@\xspace}
\makeatletter
\newcommand*{\etc}{%
    \@ifnextchar{.}%
                {etc}%
                {etc.\@\xspace}%
}
\makeatother

% lists 
\usepackage{enumitem}
\setlist[enumerate]{itemsep=0mm}
\setlist[itemize]{itemsep=0mm}

\usepackage{multirow}
\usepackage{verbatim}
\usepackage{pgfgantt}
\usepackage{pgfplots}
\usepackage{chngpage}
\pgfplotsset{width=7cm,compat=newest}
\usepackage{url}
% allow latex to break urls up over lines
\Urlmuskip=0mu plus 1mu

\usepackage[authoryear,square,sort]{natbib}
\usepackage{bibentry}
\renewcommand{\cite}{\citep}
\usepgfplotslibrary{ternary}
%\newif \ifhyperlinks    \hyperlinkstrue
%\newif \ifDraft         \Draftfalse
\newif \ifDraft        \Drafttrue
\lstset{
    language=C,
    stepnumber=1,
    tabsize=4,
    captionpos=b,
    numbers=left,
    numberstyle=\scriptsize,
    numbersep=8pt,
    commentstyle=\color{forestgreen}\ttfamily,
    stringstyle=\rmfamily,
    showstringspaces=false,
    basicstyle=\small\ttfamily,
    xleftmargin=6pt,
    xrightmargin=6pt,
    keywordstyle=\color{royalblue},
    breaklines=true,
    belowcaptionskip=.75\baselineskip
}
\usetikzlibrary{arrows,automata,shapes.multipart,positioning,plotmarks}

% font
\usepackage{palatino}
\usepackage{inconsolata}
\usepackage[T1]{fontenc}
\renewcommand\cftappendixname{\appendixname~}

%\usepackage{libertine}
%\renewcommand{\rmdefault}{ppl}
%\renewcommand{\ttdefault}{pcr}
% commands
\newcommand{\yes}{\checkmark}
\newcommand{\no}{\hspace{1pt}\ding{55}}

% sel4 system call shortcuts
\newcommand{\call}     {\texttt{Call}\xspace}
\newcommand{\send}     {\texttt{Send}\xspace}
\newcommand{\wait}     {\texttt{Wait}\xspace}
\newcommand{\nbsend}   {\texttt{NBSend}\xspace}
\newcommand{\reply}    {\texttt{Reply}\xspace}
\newcommand{\replyrecv}{\texttt{ReplyRecv}\xspace}
\newcommand{\yield}    {\texttt{Yield}\xspace}
\newcommand{\sendwait} {\texttt{SendWait}\xspace}


\newcommand{\replywait}{\texttt{ReplyWait}\xspace}
\newcommand{\recv}{\texttt{Recv}\xspace}


\newcommand{\selfour}{seL4\xspace} % use as normal text, examples below.
\newcommand{\hires}{\textsc{HiRes}\xspace}
\newcommand{\litmus}{\textsc{litmus\textsuperscript{RT}}\xspace}
\newcommand{\flare}{FlaRe\xspace}
\newcommand{\composite}{\textsc{Composite}\xspace}
\newcommand{\schedfifo}{\texttt{SCHED\_FIFO}\xspace}
\newcommand{\schedrr}{\texttt{SCHED\_RR}\xspace}
\newcommand{\schedsporadic}{\texttt{SCHED\_SPORADIC}\xspace}
\newcommand{\noprioinherit}{\texttt{NO\_PRIO\_INHERIT}\xspace}
\newcommand{\prioinherit}{\texttt{PRIO\_INHERIT}\xspace}
\newcommand{\prioprotect}{\texttt{PRIO\_PROTECT}\xspace}

\newcommand{\code}[1]{\texttt{#1}\xspace}
\newcommand{\crit}[1]{\textsc{#1}\xspace}
% Leave this in here, it is often useful to deal with latexdiff breakage.
% Put it around breakage-causing segments (in both versions to be diffed!)
\newenvironment{DIFnomarkup}{}{}

\urlstyle{rm}

\newcolumntype{i}[1]{%
    >{
\itemize[leftmargin=0.3cm]}
			p{#1}%
		<{\enditemize}}

\newcommand{\itemcol}[1] {
		\multicolumn{1}{i{5cm}|}{#1}
}

% TODOS 
\newcommand{\TODO}[1]{\textbf{\textsl{TODO: #1}}}

%
% Footnote styling.
%

% 10pt footnotes, per requirements
\renewcommand{\footnotesize}{\fontsize{9}{10}\selectfont}

% Frown upon splitting footnotes.
\interfootnotelinepenalty=5000

% Allow a bit of stretching at the bottom of the y neccessary.
%\makeatletter
%\def\@textbottom{\vskip\z@\@plus.1pt}
%\let\@texttop\relax
%\makeatother

\title{Mixed-Criticality Scheduling 
      and Resource Sharing for
     High-Assurance Operating Systems}
\author{Anna Lyons}
%\AuthorEmail{Anna.Lyons@data61.csiro.au}


% chapter headings

%make our pretty chapter headings
% Copied from AlexL via DaveC via Adam
\newcommand{\chapformat}[1]{\parbox[c]{0.8\textwidth}{\Huge #1}}
\titleformat{\chapter}[hang]
    {\bfseries}
    {\parbox[c]{0.2\textwidth}{\rmfamily\fontsize{72}{72}
     \selectfont\thechapter\hspace{10pt}\rule[-12pt]{2pt}{72pt}}}
    {0pt}
    {\chapformat}
    [\glsresetall]


\setsecnumdepth{subsection}

\widowpenalty10000
\clubpenalty10000

% evaluation commands
\newcommand{\inputbenchmarkrows}[3]{
    \midrule
    \multirow{2}{*}{\textsc{#1}}
    \input{data/generated/#2-#3-micro.inc}
}

\newcommand{\ipcmicro}[3]{\inputbenchmarkrows{#1}{#2}{#3-ipc}}
\newcommand{\faultmicro}[2]{\inputbenchmarkrows{#1}{#2}{fault}}
\newcommand{\irqmicro}[2]{\inputbenchmarkrows{#1}{#2}{irq}}
\newcommand{\schedulemicro}[2]{\inputbenchmarkrows{#1}{#2}{schedule}}
\begin{document}
% tell latex this is the preamble
\frontmatter
% Title page 
\input{title}

\urlstyle{sf}
\pagestyle{plain}

%Abstract

\input{abstract}
\clearpage
\input{acknowledgements}
\clearpage
\input{publications}
%\clearpage
%\listoffigures
%\clearpage
%\listoftables
%\clearpage
%\input{glossary}
%\printglossary[type=\acronymtype]
%\clearpage


\tableofcontents
\cleardoublepage
\newpage

% tell latex to start the real page numbers
\mainmatter

\sloppy
% glossary
\pagebreak

\input{introduction}
\input{background}
\input{scheduling}
\input{resource-sharing}
\input{operating-systems}
\input{seL4}
\input{model}
\input{implementation}
\input{evaluation}
\input{conclusion}

%{
%\backmatter
\cleardoublepage
\bibliographystyle{plainnat}
\bibliography{references}

%}
\appendix
\appendixpage
\chapter{Fastpath Performance}
\input{data/generated/kzm-ipc-perf.inc}
\input{data/generated/sabre-ipc-perf.inc}
\input{data/generated/hikey32-ipc-perf.inc}
\input{data/generated/hikey64-ipc-perf.inc}
\input{data/generated/tx1-ipc-perf.inc}
\input{data/generated/haswell-ipc-perf.inc}
\input{api.tex}
\end{document}
