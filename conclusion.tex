\chapter{Conclusion}
\label{chap:conclusion}

Emerging cyber-physical systems represent an opportunity for greater safety, security and 
automation, as they can replace systems where human error prevail. While humans are excellent at
innovation and creativity, they cannot compete with machines that do not get tired, drunk or
distracted when completing
monotonous, repetitive tasks. Car accidents are overwhelmingly 
caused by human error, measured at 94\% in the US~\citep{Singh_15}, something that self-driving cars can overcome. Autonomous aircraft and other fleet vehicles, smart cities and smart factories hold similar promise. 

As established in \cref{sec:motivation}, in order to practically develop such systems,
they must be mixed-criticality, as certification of all parts of such a system to high-assurance
levels is not feasible. Consequently, require strong temporal isolation, asymmetric protection, 
and mechanisms to support sharing resources between sub-systems of different criticality levels. 

This thesis has drawn on real-time theory and systems practice to develop core-mechanisms required
in a high-assurance, trusted computing base for mixed criticality systems. Importantly, the
mechanisms we have developed do not violate other requirements, like policy-freedom, integrity,
confidentiality, spatial isolation, and security. 

In \cref{chap:model}, we introduced our model for treating time as a first-class resource, and 
defined a minimal set of
mechanisms that can be leveraged to implement temporal isolation between threads, even within shared
servers. Our primitives also allow for more complex, application specific user-level schedulers to
be constructed efficiently, as we showed in the evaluation. Although many attempts at integrating a
capability system with the non-fungible resource that is time have existed before, we believe this is
the first complete implementation which provides permission to time while not imposing policy
restrictions. Unlike many models before it, we do not impose hierarchical scheduling, and our model
does not conflate criticality, temporal sensitivity and trust.
\clearpage

\section{Contributions}

Specifically, we make the following contributions:

\begin{itemize}
    \item Mechanisms for principled management of time through capabilities to scheduling contexts,
        which is compatible with the fast IPC implementations traditional used in high-performance
        microkernels, and is compatible with established real-time resource-sharing policies;
    \item An implementation of those mechanisms in the non-preemptible \selfour microkernel, and an
        exploration of how the implementation interacts with the existing kernel model;
    \item An evaluation of the overheads and isolation properties of the implementation, to the
        point of showing isolation in a shared server through timeout-fault handling;
    \item Design and implementation of many different, user-level timeout-fault handling policies;
    \item An implementation of a user-level \gls{EDF} scheduler which is competitive with the
        \litmus, in-kernel EDF scheduler, which shows that despite the fixed-priority scheduler
        present in the kernel, other schedulers remain practical;
    \item and a design and implementation of a criticality switch at user-level, which shows that
        criticality is not required to be a kernel provided property;
\end{itemize}

The implementation is complete, and the verification of this model is currently in-progress.
Specifications have already been developed by the verification engineering team at Data61, CSIRO,
who are now completing the first-level refinement of the functional correctness proof.
The maximum controlled priority feature has already been merged to the master kernel. 
Verification is beyond the scope of this PhD, although we continue to work closely with
the team to assist in verification. 

During the development of this thesis we have contributed an extended benchmarking suite and
user-level libraries for running experiments and building systems on \selfour. This work was part of
the HACMS project \TODO{how to cite this project}. 

\section{Future work}

Modern \glspl{CPU} have dynamic frequency scaling and low-power modes in order to save power, which
is of high concern in many embedded systems. The implementation as it stands assumes a constant
\gls{CPU} frequency, and all kernel operations are calculated in \gls{CPU} cycles. Frequency scaling
can have undesirable effects on real-time processes: if the period is specified in microseconds, then
converted to cycles and the CPU frequency changes, does the period remain correct? This is a
limitation of our model and promising area for future work.

Although we provide a mechanism for cross-core IPC, where passive threads migrate between processing
cores and active threads remain fixed, there is much more to consider in terms of multicore
scheduling and resource sharing. Our model provides a partitioned, fixed priority scheduler, and 
load-balancing is up to user level. Further experiments to evaluate the mechanisms for higher-level
multicore scheduling and resource sharing protocols is required. 
                
\section{Summary}

Cyber-physical systems are the future, and our work has focused on principled mechanisms for
managing time in such systems, which are critical in more ways than the impact of failure. The work
we have done is one step of thousands towards of future of trustworthy, safe and secure
autonomous systems. 
